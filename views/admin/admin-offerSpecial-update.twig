{% extends 'admin/admin-layout.twig' %}

{% block content %}
<div>
    <form id="offerForm" action="/admin/{{ lang }}/offerSpecial/{{ offerSpecial.getId }}/update" method="post" enctype="multipart/form-data">
        <table class="table table-bordered">
            <thead class="thead-light">
                <tr class="table-light">
                    <th scope="col" class="col-2">Element</th>
                    <th scope="col" class="col-10">Zawartość</th>
                </tr>
            </thead>
            <tbody id="data">
                <tr>
                    <th scope="row">Kod oferty specjalnej</th>
                    <td><input id="code" class="form-control" type="text" name="code" value="{{ offerSpecial.getCode }}"></td>
                </tr>
                <tr>
                    <th scope="row">URL</th>
                    <td><input id="url" class="form-control" type="text" name="url" value="{{ offerSpecial.getUrl }}" disabled></td>
                </tr>
                <tr>
                    <th scope="row">Heading 3</th>
                    <td><input id="heading3" class="form-control" type="text" name="heading_3" value="{{ offerSpecial.getHeading3 }}"></td>
                </tr>
                <tr>
                    <th scope="row">Heading 2</th>
                    <td><input id="heading2" class="form-control" type="text" name="heading_2" value="{{ offerSpecial.getHeading2 }}"></td>
                </tr>
                <tr>
                    <th scope="col">Długi opis</th>
                    <td><textarea id="longDesc" class="form-control" name="long_desc" cols="100" oninput="display(this)">{{ offerSpecial.getLongDesc }}</textarea></td>
                </tr>
                <tr>
                    <th scope="col">Zdjęcie</th>
                    <td>
                        <input id="img" class="form-control" type="file" name="img">
                        <input id="img_original" class="form-control" type="hidden" name="img_original" value="{{ offerSpecial.getImg }}">
                    </td>                    
                </tr>
            </tbody>
        </table>
<!-- TODO: Browser will automaticly validate input. However, if the JS function submit() is used, it will submit the form anyway. Must use input type="submit" for automatic validation or validate input data inside function -->
        <button class="btn btn-primary btn-lg btn-block" onlcick="submitForm()">Zapisz</button>
    </form>
</div>
<br><br>
<hr>
<!-- End of Container -->

<!-- textarea function -->
<script>
    const tx = document.getElementsByTagName('textarea');
    for (let i = 0; i < tx.length; i++) {
        tx[i].setAttribute('style', 'height:' + (tx[i].scrollHeight) + 'px;overflow-y:hidden;');        
        tx[i].addEventListener("input", OnInput, false);
    }

    function OnInput() {
        this.style.height = 'auto';
        this.style.height = (this.scrollHeight) + 'px';
    }

</script>

<script>
    function submitForm() {
        const element = document.getElementById("offerForm");
        element.submit();
    }
</script>

{% endblock %}